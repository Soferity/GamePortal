<!DOCTYPE html>
<html>
<head>
	<base href="/" />
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover, shrink-to-fit=no" />
	<meta http-equiv="x-ua-compatible" content="ie=edge" />
	<link rel="icon" href="img/gameportal-favicon.ico" type="image/x-icon" />
	<link href="css/custom.css" rel="stylesheet" type="text/css" />
	<title>Soferity: Game Portal</title>
</head>

<body id="body" style="overflow: hidden">
    
	<div class="loaderer" id="preloader">
		<div class="bar1"></div>
		<div class="bar2"></div>
		<div class="bar3"></div>
		<div class="bar4"></div>
		<div class="bar5"></div>
		<div class="bar6"></div>
	</div>

	<div id="application" style="visibility: hidden"></div>

	<script src="_framework/blazor.webview.js" autostart="false"></script>

	<script>
		//document.addEventListener("DOMContentLoaded", function () {
		//	Blazor.start();
		//});

        document.addEventListener('readystatechange', event => {
            switch (document.readyState) {
				case "loading":
                    //var current = new Date();
                    //console.log("document.readyState: ", document.readyState,
                    //    `- The document is still loading.`,
                    //    `Time: `, current.toLocaleString(), `Unix: `, current.getTime()
                    //);
                    break;
                case "interactive":
                    //var current = new Date();
                    //console.log("document.readyState: ", document.readyState,
                    //    `- The document has finished loading DOM. `,
                    //    `- "DOMContentLoaded" event`,
                    //    `Time: `, current.toLocaleString(), `Unix: `, current.getTime()
                    //);
                    break;
                case "complete":
                    //var current = new Date();
                    //console.log("document.readyState: ", document.readyState,
                    //    `- The page DOM with Sub-resources are now fully loaded. `,
                    //    `- "load" event`,
                    //    `Time: `, current.toLocaleString(), `Unix: `, current.getTime()
                    //);
                    Preloaded();
					break;
                default:
                    var current = new Date();
					console.log("document.readyState: ", document.readyState,
                        `Time: `, current.toLocaleString(), `Unix: `, current.getTime()
					);
                    break;
            }
		});

        window.onload = function () { // can also use window.addEventListener('load', (event) => {
            //var current = new Date();
            //console.log("window.onload: onload",
            //    `Time: `, current.toLocaleString(), `Unix: `, current.getTime()
            //);
            Preloaded();
        };

		var countLoader = 0;
		function Preloaded() {
            if (countLoader > 1) {
                countLoader = 0;
                document.getElementById("preloader").style.display = "none";
                document.getElementById("application").style.visibility = "visible";
                document.getElementById("body").style.overflow = "unset";
            }
            else {
                ++countLoader;
            }
		}
	</script>

</body>

</html>